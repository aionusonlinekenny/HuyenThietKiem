================================================================================
MapTool Debug Log - 2025-11-28 01:04:32
================================================================================

[01:04:32.825] ✓ Debug log initialized: C:\Users\Administrator\Downloads\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9(5)\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9\SwordOnline\Sources\Tool\MapTool\bin\Release\net48\MapTool_Debug_20251128_010432.log
[01:04:32.825] === MapTool Started ===
[01:04:32.826] Executable: C:\Users\Administrator\Downloads\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9(5)\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9\SwordOnline\Sources\Tool\MapTool\bin\Release\net48\MapTool.exe
[01:04:32.826] Working Directory: C:\Users\Administrator\Downloads\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9(5)\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9\SwordOnline\Sources\Tool\MapTool\bin\Release\net48
[01:04:32.826] Log file: C:\Users\Administrator\Downloads\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9(5)\HuyenThietKiem-claude-fix-map-loading-01Ljy9dmd8n9d8Gh1uvcEZN9\SwordOnline\Sources\Tool\MapTool\bin\Release\net48\MapTool_Debug_20251128_010432.log
[01:04:32.827] --------------------------------------------------------------------------------
[01:04:32.827] Default folder set: D:\HuyenThietKiem\Bin\Server
[01:04:35.932] --------------------------------------------------------------------------------
[01:04:35.933] 📂 LOADING MAP
[01:04:35.933]    Map ID: 11
[01:04:35.933]    Game Folder: D:\HuyenThietKiem\Bin\Server
[01:04:35.934]    Mode: Server
[01:04:35.934] --------------------------------------------------------------------------------
[01:04:36.166] --------------------------------------------------------------------------------
[01:04:36.166] 🔍 PARSED RECT FROM .WOR FILE
[01:04:36.166]    rect = 165,142,215,172
[01:04:36.167]    Grid size: 51 x 31 regions
[01:04:36.167]    First region coords: (165, 142)
[01:04:36.167]    First RegionID (Y*256+X): 142*256 + 165 = 36517
[01:04:36.167] --------------------------------------------------------------------------------
[01:04:36.168] --------------------------------------------------------------------------------
[01:04:36.168] 🔍 SCANNING FOR REGION FILES
[01:04:36.168]    Looking for regions from (165,142) to (215,172)
[01:04:36.169]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\165_Region_S.dat
[01:04:36.169]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\166_Region_S.dat
[01:04:36.169]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\167_Region_S.dat
[01:04:36.170]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\168_Region_S.dat
[01:04:36.170]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\169_Region_S.dat
[01:04:36.173]    ✓ Found region (3d,3d) → RegionID=36557 | File: maps\西南北区\成都\成都\v_142\205_Region_S.dat
[01:04:36.173]    ✓ Found region (3d,3d) → RegionID=36558 | File: maps\西南北区\成都\成都\v_142\206_Region_S.dat
[01:04:36.173]    ✓ Found region (3d,3d) → RegionID=36559 | File: maps\西南北区\成都\成都\v_142\207_Region_S.dat
[01:04:36.174]    ✓ Found region (3d,3d) → RegionID=36807 | File: maps\西南北区\成都\成都\v_143\199_Region_S.dat
[01:04:36.174]    ✓ Found region (3d,3d) → RegionID=36808 | File: maps\西南北区\成都\成都\v_143\200_Region_S.dat
[01:04:36.175]    ⚠ Error loading (206,143): Unable to read beyond the end of the stream.
[01:04:36.176]    ⚠ Error loading (206,144): Unable to read beyond the end of the stream.
[01:04:36.180]    ⚠ Error loading (175,149): Unable to read beyond the end of the stream.
[01:04:36.181]    ⚠ Error loading (176,149): Unable to read beyond the end of the stream.
[01:04:36.182]    ⚠ Error loading (175,150): Unable to read beyond the end of the stream.
[01:04:36.182]    ⚠ Error loading (176,150): Unable to read beyond the end of the stream.
[01:04:36.186]    ⚠ Error loading (188,154): Unable to read beyond the end of the stream.
[01:04:36.187]    ⚠ Error loading (205,155): Unable to read beyond the end of the stream.
[01:04:36.189]    ⚠ Error loading (205,156): Unable to read beyond the end of the stream.
[01:04:36.190]    ⚠ Error loading (177,158): Unable to read beyond the end of the stream.
[01:04:36.192]    ⚠ Error loading (203,158): Unable to read beyond the end of the stream.
[01:04:36.192]    ⚠ Error loading (177,159): Unable to read beyond the end of the stream.
[01:04:36.194]    ⚠ Error loading (186,160): Unable to read beyond the end of the stream.
[01:04:36.197]    ⚠ Error loading (200,163): Unable to read beyond the end of the stream.
[01:04:36.198]    ⚠ Error loading (201,163): Unable to read beyond the end of the stream.
[01:04:36.200]    ⚠ Error loading (212,165): Unable to read beyond the end of the stream.
[01:04:36.200]    ⚠ Error loading (213,165): Unable to read beyond the end of the stream.
[01:04:36.201]    ⚠ Error loading (169,166): Unable to read beyond the end of the stream.
[01:04:36.202]    ⚠ Error loading (212,166): Unable to read beyond the end of the stream.
[01:04:36.202]    ⚠ Error loading (213,166): Unable to read beyond the end of the stream.
[01:04:36.202]    ⚠ Error loading (169,167): Unable to read beyond the end of the stream.
[01:04:36.205]    ⚠ Error loading (202,169): Unable to read beyond the end of the stream.
[01:04:36.206]    ⚠ Error loading (201,170): Unable to read beyond the end of the stream.
[01:04:36.206]    ⚠ Error loading (202,170): Unable to read beyond the end of the stream.
[01:04:36.208] --------------------------------------------------------------------------------
[01:04:36.208] 📊 REGION SCAN SUMMARY
[01:04:36.209]    Attempted: 1581 regions
[01:04:36.209]    Loaded: 803 regions
[01:04:36.209]    Missing: 778 regions
[01:04:36.209]    First missing: (165,142), (166,142), (167,142), (168,142), (169,142)
[01:04:36.209]    First existing: (205,142), (206,142), (207,142), (199,143), (200,143)
[01:04:36.209] --------------------------------------------------------------------------------
[01:04:36.210] 🖼️  LOADING MAP IMAGE
[01:04:36.210]    Map ID: 11
[01:04:36.210]    Folder Path: 西南北区\成都\成都
[01:04:36.210]    Image Path: \maps\西南北区\成都\成都24.jpg
[01:04:36.210]    Disk Path (Unicode): D:\HuyenThietKiem\Bin\Server\maps\西南北区\成都\成都24.jpg
[01:04:36.211]    Disk Exists (direct): False
[01:04:36.211]    🔍 Searching with filesystem enumeration (handles GB2312 encoding)...
[01:04:36.211]       Expected directory: maps\西南北区\成都
[01:04:36.211]       Expected filename: 成都24.jpg
[01:04:36.212]       🔍 Match strategy: Direct Unicode
[01:04:36.212]       ✓ Found: maps → maps
[01:04:36.212]       🔍 Match strategy: GB2312 re-decode (Default→GB2312)
[01:04:36.212]          Original: 'Î÷ÄÏ±±Çø' → Decoded: '西南北区'
[01:04:36.213]       ✓ Found: 西南北区 → Î÷ÄÏ±±Çø
[01:04:36.213]       🔍 Match strategy: GB2312 re-decode (Default→GB2312)
[01:04:36.213]          Original: '³É¶¼' → Decoded: '成都'
[01:04:36.213]       ✓ Found: 成都 → ³É¶¼
[01:04:36.213]       📁 Navigated to: D:\HuyenThietKiem\Bin\Server\maps\Î÷ÄÏ±±Çø\³É¶¼
[01:04:36.214]       🔍 Looking for file: 成都24.jpg
[01:04:36.214]       ✓ File match: GB2312 re-decode
[01:04:36.214]          Original: '³É¶¼24.jpg' → Decoded: '成都24.jpg'
[01:04:36.214]    ✓ Found image via enumeration: D:\HuyenThietKiem\Bin\Server\maps\Î÷ÄÏ±±Çø\³É¶¼\³É¶¼24.jpg
[01:04:36.214] ✓ Loading image from DISK (via filesystem enumeration)
[01:04:36.215] ✓ Loaded map image from disk (enumerated): D:\HuyenThietKiem\Bin\Server\maps\Î÷ÄÏ±±Çø\³É¶¼\³É¶¼24.jpg
[01:04:36.215]    Size: 572,772 bytes
[01:04:36.215]    Offset: (21120, 18176) pixels
[01:04:36.215] --------------------------------------------------------------------------------
[01:04:36.215] ✓ Map loaded successfully!
[01:04:36.216]    Name: Th祅h Й
[01:04:36.216]    Folder: 西南北区\成都\成都
[01:04:36.216]    Regions loaded: 803
[01:04:36.216]    First region: (205, 142) RegionID=36557
[01:04:36.216] --------------------------------------------------------------------------------
[08:07:39.910] --------------------------------------------------------------------------------
[08:07:39.911] 📂 LOADING MAP
[08:07:39.911]    Map ID: 11
[08:07:39.911]    Game Folder: D:\HuyenThietKiem\Bin\Server
[08:07:39.911]    Mode: Server
[08:07:39.911] --------------------------------------------------------------------------------
[08:07:40.160] --------------------------------------------------------------------------------
[08:07:40.160] 🔍 PARSED RECT FROM .WOR FILE
[08:07:40.160]    rect = 165,142,215,172
[08:07:40.160]    Grid size: 51 x 31 regions
[08:07:40.160]    First region coords: (165, 142)
[08:07:40.160]    First RegionID (Y*256+X): 142*256 + 165 = 36517
[08:07:40.160] --------------------------------------------------------------------------------
[08:07:40.161] --------------------------------------------------------------------------------
[08:07:40.161] 🔍 SCANNING FOR REGION FILES
[08:07:40.161]    Looking for regions from (165,142) to (215,172)
[08:07:40.161]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\165_Region_S.dat
[08:07:40.161]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\166_Region_S.dat
[08:07:40.161]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\167_Region_S.dat
[08:07:40.162]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\168_Region_S.dat
[08:07:40.162]    ✗ Missing region (3d,3d) | Expected: maps\西南北区\成都\成都\v_142\169_Region_S.dat
[08:07:40.163]    ✓ Found region (3d,3d) → RegionID=36557 | File: maps\西南北区\成都\成都\v_142\205_Region_S.dat
[08:07:40.163]    ✓ Found region (3d,3d) → RegionID=36558 | File: maps\西南北区\成都\成都\v_142\206_Region_S.dat
[08:07:40.163]    ✓ Found region (3d,3d) → RegionID=36559 | File: maps\西南北区\成都\成都\v_142\207_Region_S.dat
[08:07:40.164]    ✓ Found region (3d,3d) → RegionID=36807 | File: maps\西南北区\成都\成都\v_143\199_Region_S.dat
[08:07:40.164]    ✓ Found region (3d,3d) → RegionID=36808 | File: maps\西南北区\成都\成都\v_143\200_Region_S.dat
[08:07:40.165]    ⚠ Error loading (206,143): Unable to read beyond the end of the stream.
[08:07:40.166]    ⚠ Error loading (206,144): Unable to read beyond the end of the stream.
[08:07:40.169]    ⚠ Error loading (175,149): Unable to read beyond the end of the stream.
[08:07:40.170]    ⚠ Error loading (176,149): Unable to read beyond the end of the stream.
[08:07:40.171]    ⚠ Error loading (175,150): Unable to read beyond the end of the stream.
[08:07:40.171]    ⚠ Error loading (176,150): Unable to read beyond the end of the stream.
[08:07:40.175]    ⚠ Error loading (188,154): Unable to read beyond the end of the stream.
[08:07:40.176]    ⚠ Error loading (205,155): Unable to read beyond the end of the stream.
[08:07:40.178]    ⚠ Error loading (205,156): Unable to read beyond the end of the stream.
[08:07:40.180]    ⚠ Error loading (177,158): Unable to read beyond the end of the stream.
[08:07:40.180]    ⚠ Error loading (203,158): Unable to read beyond the end of the stream.
[08:07:40.181]    ⚠ Error loading (177,159): Unable to read beyond the end of the stream.
[08:07:40.184]    ⚠ Error loading (186,160): Unable to read beyond the end of the stream.
[08:07:40.187]    ⚠ Error loading (200,163): Unable to read beyond the end of the stream.
[08:07:40.187]    ⚠ Error loading (201,163): Unable to read beyond the end of the stream.
[08:07:40.190]    ⚠ Error loading (212,165): Unable to read beyond the end of the stream.
[08:07:40.190]    ⚠ Error loading (213,165): Unable to read beyond the end of the stream.
[08:07:40.191]    ⚠ Error loading (169,166): Unable to read beyond the end of the stream.
[08:07:40.193]    ⚠ Error loading (212,166): Unable to read beyond the end of the stream.
[08:07:40.193]    ⚠ Error loading (213,166): Unable to read beyond the end of the stream.
[08:07:40.193]    ⚠ Error loading (169,167): Unable to read beyond the end of the stream.
[08:07:40.196]    ⚠ Error loading (202,169): Unable to read beyond the end of the stream.
[08:07:40.197]    ⚠ Error loading (201,170): Unable to read beyond the end of the stream.
[08:07:40.197]    ⚠ Error loading (202,170): Unable to read beyond the end of the stream.
[08:07:40.199] --------------------------------------------------------------------------------
[08:07:40.199] 📊 REGION SCAN SUMMARY
[08:07:40.199]    Attempted: 1581 regions
[08:07:40.199]    Loaded: 803 regions
[08:07:40.200]    Missing: 778 regions
[08:07:40.200]    First missing: (165,142), (166,142), (167,142), (168,142), (169,142)
[08:07:40.200]    First existing: (205,142), (206,142), (207,142), (199,143), (200,143)
[08:07:40.200] --------------------------------------------------------------------------------
[08:07:40.200] 🖼️  LOADING MAP IMAGE
[08:07:40.200]    Map ID: 11
[08:07:40.201]    Folder Path: 西南北区\成都\成都
[08:07:40.201]    Image Path: \maps\西南北区\成都\成都24.jpg
[08:07:40.201]    Disk Path (Unicode): D:\HuyenThietKiem\Bin\Server\maps\西南北区\成都\成都24.jpg
[08:07:40.201]    Disk Exists (direct): False
[08:07:40.201]    🔍 Searching with filesystem enumeration (handles GB2312 encoding)...
[08:07:40.202]       Expected directory: maps\西南北区\成都
[08:07:40.202]       Expected filename: 成都24.jpg
[08:07:40.202]       🔍 Match strategy: Direct Unicode
[08:07:40.202]       ✓ Found: maps → maps
[08:07:40.203]       🔍 Match strategy: GB2312 re-decode (Default→GB2312)
[08:07:40.203]          Original: 'Î÷ÄÏ±±Çø' → Decoded: '西南北区'
[08:07:40.203]       ✓ Found: 西南北区 → Î÷ÄÏ±±Çø
[08:07:40.203]       🔍 Match strategy: GB2312 re-decode (Default→GB2312)
[08:07:40.203]          Original: '³É¶¼' → Decoded: '成都'
[08:07:40.203]       ✓ Found: 成都 → ³É¶¼
[08:07:40.204]       📁 Navigated to: D:\HuyenThietKiem\Bin\Server\maps\Î÷ÄÏ±±Çø\³É¶¼
[08:07:40.204]       🔍 Looking for file: 成都24.jpg
[08:07:40.204]       ✓ File match: GB2312 re-decode
[08:07:40.204]          Original: '³É¶¼24.jpg' → Decoded: '成都24.jpg'
[08:07:40.204]    ✓ Found image via enumeration: D:\HuyenThietKiem\Bin\Server\maps\Î÷ÄÏ±±Çø\³É¶¼\³É¶¼24.jpg
[08:07:40.204] ✓ Loading image from DISK (via filesystem enumeration)
[08:07:40.205] ✓ Loaded map image from disk (enumerated): D:\HuyenThietKiem\Bin\Server\maps\Î÷ÄÏ±±Çø\³É¶¼\³É¶¼24.jpg
[08:07:40.205]    Size: 572,772 bytes
[08:07:40.205]    Offset: (21120, 18176) pixels
[08:07:40.205] --------------------------------------------------------------------------------
[08:07:40.206] ✓ Map loaded successfully!
[08:07:40.206]    Name: Th祅h Й
[08:07:40.206]    Folder: 西南北区\成都\成都
[08:07:40.206]    Regions loaded: 803
[08:07:40.206]    First region: (205, 142) RegionID=36557
[08:07:40.206] --------------------------------------------------------------------------------
